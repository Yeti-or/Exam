"use strict";var app=window.app=angular.module("SHRIApp",["ngResource","ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("students"),a.state("students",{url:"/students",templateUrl:"views/students.html",controller:"StudentsCtrl"}).state("student",{url:"/students/:studentId",templateUrl:"views/student.html",controller:"StudentCtrl"})}]),window.app.controller("StudentsCtrl",["Students","$scope","$state",function(a,b,c){a.query(function(a){b.students=a}),b.showStudent=function(a){c.go("student",{studentId:a})}}]),window.app.controller("StudentCtrl",["Students","$scope","$state","$stateParams",function(a,b,c,d){var e=d.studentId;a.query(function(a){b.student=a[e],b.firstOne=0===+e||!b.student,b.lastOne=+e===a.length-1||!b.student}),b.nextOne=function(){c.go("student",{studentId:++e})},b.prevOne=function(){c.go("student",{studentId:--e})}}]),window.app.factory("Students",["$resource",function(a){return a("data/students.json")}]),window.app.directive("backImgSrc",function(){return function(a,b,c){c.$observe("backImgSrc",function(a){b.css({"background-image":"url("+a+")"})})}}),window.app.directive("githubBtn",function(){return{scope:{github:"@githubBtn"},replace:!0,template:'<iframe allowtransparency="true" frameborder="0" scrolling="0" width="165" height="20"></iframe>',link:function(a,b){function c(a){var b,c=a.split("/");return b=c[c.length-1],""===b&&(b=c[c.length-2]),b}function d(){var d="http://ghbtns.com/github-btn.html?";d+="user=",d+=c(a.github),d+="&",d+="type=follow",d+="&",d+="count=true",b.attr("src",d)}a.$watch(function(){return a.github},function(a,b){a!==b&&d(a)})}}}),window.app.directive("student",function(){return{restict:"EA",replace:!0,scope:{student:"="},templateUrl:"templates/student.html",link:function(a,b){a.student={},a.$watch(function(){return a.student},function(c,d){d===c||c||(a.student={link_photo:"/styles/img/questionMark.png",about:"Нет такого студента, может быть это ты?"},b.find("span").addClass("not-found"))})}}});